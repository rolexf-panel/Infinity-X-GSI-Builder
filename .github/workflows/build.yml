name: Build Infinity X

#on:
#  push:
#    branches: [ "main" ]
#  workflow_dispatch:

jobs:
  execute-script:
    runs-on: ubuntu-22.04

    steps:
      # 1. Checkout kode
      - name: Checkout repository
        uses: actions/checkout@v4
        
      # 2. Membersihkan runner
      - name: Cleaning disk space
        uses: rokibhasansagar/slimhub_actions@v25.42.5
        
      # 3. Jalankan script (Ditambahkan ID agar output bisa dibaca)
      - name: Run script.sh
        id: build_step
        run: |
          chmod +x ./script.sh
          ./script.sh
          
      # 4. Menampilkan summary (Indentasi diperbaiki)
      - name: Tampilkan Summary di Dashboard
        if: always()
        run: |
          echo "## ðŸ“Š Hasil Build GSI" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| Detail | Info |" >> $GITHUB_STEP_SUMMARY
          echo "| :--- | :--- |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ“¦ Status | âœ… Selesai |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ”— Link Download | [Klik Disini](${{ steps.build_step.outputs.gofile_link }}) |" >> $GITHUB_STEP_SUMMARY
          echo "| ðŸ•’ Waktu Build | $(date +'%Y-%m-%d %H:%M') |" >> $GITHUB_STEP_SUMMARY
